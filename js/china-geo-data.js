/* ============================================
   BeeFarm - China GeoJSON Data
   中国地图简化GeoJSON数据（包含34个省级行政区）
   数据采用 Mercator 投影坐标，已简化以保证性能
   ============================================ */

const ChinaGeoData = (function() {
  'use strict';

  // 中国地图边界（用于坐标转换）
  // 经度范围: 73.5° - 135.5° E
  // 纬度范围: 17.5° - 53.5° N
  const bounds = {
    minLng: 73.5,
    maxLng: 135.5,
    minLat: 17.5,
    maxLat: 53.5
  };

  // 省份配色方案（卡通风格）
  const provinceColors = {
    '新疆': '#A5D6A7',
    '西藏': '#C8E6C9',
    '内蒙古': '#DCEDC8',
    '青海': '#E8F5E9',
    '四川': '#81C784',
    '黑龙江': '#AED581',
    '甘肃': '#C5E1A5',
    '云南': '#66BB6A',
    '广西': '#81C784',
    '湖南': '#A5D6A7',
    '陕西': '#9CCC65',
    '广东': '#8BC34A',
    '吉林': '#C5E1A5',
    '河北': '#DCEDC8',
    '湖北': '#81C784',
    '贵州': '#66BB6A',
    '山东': '#AED581',
    '江西': '#A5D6A7',
    '河南': '#C5E1A5',
    '辽宁': '#8BC34A',
    '山西': '#DCEDC8',
    '安徽': '#9CCC65',
    '福建': '#81C784',
    '浙江': '#66BB6A',
    '江苏': '#AED581',
    '重庆': '#A5D6A7',
    '宁夏': '#E8F5E9',
    '海南': '#4CAF50',
    '台湾': '#81C784',
    '北京': '#FF8A65',
    '天津': '#FFAB91',
    '上海': '#FF7043',
    '香港': '#FFB74D',
    '澳门': '#FFA726'
  };

  // 省份信息（名称、中心点）
  const provinceInfo = {
    '新疆': { center: [85.6, 41.7], abbr: '新' },
    '西藏': { center: [89.1, 31.5], abbr: '藏' },
    '内蒙古': { center: [114.0, 44.0], abbr: '蒙' },
    '青海': { center: [96.0, 35.5], abbr: '青' },
    '四川': { center: [102.7, 30.5], abbr: '川' },
    '黑龙江': { center: [127.5, 47.5], abbr: '黑' },
    '甘肃': { center: [103.8, 36.0], abbr: '甘' },
    '云南': { center: [101.5, 24.5], abbr: '滇' },
    '广西': { center: [108.3, 23.7], abbr: '桂' },
    '湖南': { center: [111.7, 27.6], abbr: '湘' },
    '陕西': { center: [108.9, 34.3], abbr: '陕' },
    '广东': { center: [113.4, 23.4], abbr: '粤' },
    '吉林': { center: [126.5, 43.5], abbr: '吉' },
    '河北': { center: [115.5, 38.5], abbr: '冀' },
    '湖北': { center: [112.3, 30.9], abbr: '鄂' },
    '贵州': { center: [106.7, 26.8], abbr: '黔' },
    '山东': { center: [118.5, 36.4], abbr: '鲁' },
    '江西': { center: [115.9, 27.6], abbr: '赣' },
    '河南': { center: [113.6, 34.0], abbr: '豫' },
    '辽宁': { center: [123.4, 41.1], abbr: '辽' },
    '山西': { center: [112.5, 37.5], abbr: '晋' },
    '安徽': { center: [117.2, 31.8], abbr: '皖' },
    '福建': { center: [118.3, 26.0], abbr: '闽' },
    '浙江': { center: [120.1, 29.2], abbr: '浙' },
    '江苏': { center: [119.8, 33.0], abbr: '苏' },
    '重庆': { center: [107.5, 29.5], abbr: '渝' },
    '宁夏': { center: [106.2, 37.3], abbr: '宁' },
    '海南': { center: [109.8, 19.2], abbr: '琼' },
    '台湾': { center: [121.0, 23.8], abbr: '台' },
    '北京': { center: [116.4, 40.0], abbr: '京' },
    '天津': { center: [117.2, 39.1], abbr: '津' },
    '上海': { center: [121.5, 31.2], abbr: '沪' },
    '香港': { center: [114.2, 22.3], abbr: '港' },
    '澳门': { center: [113.5, 22.2], abbr: '澳' }
  };

  // 简化的中国地图GeoJSON数据
  // 坐标格式: [经度, 纬度]
  const geoData = {
    "type": "FeatureCollection",
    "features": [
      // 新疆
      {
        "type": "Feature",
        "properties": { "name": "新疆", "id": "65" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[73.6,39.5],[74.9,38.4],[76.3,36.0],[78.4,35.5],[80.2,35.8],[82.5,36.0],[85.0,36.2],[87.5,36.4],[89.8,36.1],[92.0,35.0],[93.5,35.5],[96.0,36.5],[96.4,40.0],[96.0,42.5],[94.5,44.0],[91.0,45.0],[87.5,47.0],[85.5,48.0],[83.0,47.5],[80.5,45.5],[79.0,44.5],[76.0,42.0],[74.5,40.5],[73.6,39.5]]]
        }
      },
      // 西藏
      {
        "type": "Feature",
        "properties": { "name": "西藏", "id": "54" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[78.4,35.5],[80.2,35.0],[82.0,33.5],[84.0,32.5],[86.0,32.0],[88.5,31.5],[90.5,31.0],[92.5,30.0],[94.5,29.0],[96.5,28.5],[98.5,27.5],[99.0,28.5],[99.5,29.5],[98.5,31.0],[97.5,32.5],[97.0,34.0],[96.0,36.0],[93.5,35.5],[91.5,35.0],[89.8,36.1],[87.5,36.4],[85.0,36.2],[82.5,36.0],[80.2,35.8],[78.4,35.5]]]
        }
      },
      // 内蒙古
      {
        "type": "Feature",
        "properties": { "name": "内蒙古", "id": "15" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[97.5,42.5],[101.0,42.0],[105.0,42.5],[108.0,42.0],[111.0,43.5],[114.0,45.0],[117.0,46.5],[119.5,46.5],[121.5,47.0],[123.5,46.5],[126.0,46.0],[126.5,45.0],[124.5,43.5],[123.0,42.5],[122.0,41.5],[120.5,40.5],[118.0,40.0],[116.5,41.0],[115.0,42.5],[112.0,42.0],[110.0,40.5],[108.5,40.0],[106.5,40.5],[105.0,41.5],[103.0,42.0],[100.0,42.5],[97.5,42.5]]]
        }
      },
      // 青海
      {
        "type": "Feature",
        "properties": { "name": "青海", "id": "63" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[89.5,36.5],[91.5,36.8],[93.5,36.5],[96.0,36.5],[98.0,36.0],[100.5,35.5],[102.5,36.5],[103.5,36.0],[102.5,34.5],[101.5,33.0],[100.5,32.0],[99.0,32.5],[97.5,32.5],[96.0,33.5],[94.5,33.5],[92.5,34.0],[91.0,34.5],[89.5,35.0],[89.5,36.5]]]
        }
      },
      // 四川
      {
        "type": "Feature",
        "properties": { "name": "四川", "id": "51" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[97.5,32.5],[99.0,32.5],[100.5,32.0],[101.5,33.0],[102.5,34.5],[103.5,34.5],[104.5,33.5],[105.5,33.0],[106.5,32.5],[107.5,31.5],[108.5,31.0],[110.0,31.5],[110.5,30.5],[109.5,29.5],[108.5,28.5],[107.0,28.0],[105.5,27.5],[104.0,27.5],[102.5,27.5],[101.0,27.0],[100.0,28.0],[99.0,28.0],[98.0,28.5],[97.5,30.0],[97.5,32.5]]]
        }
      },
      // 黑龙江
      {
        "type": "Feature",
        "properties": { "name": "黑龙江", "id": "23" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[121.5,53.5],[123.5,53.0],[125.5,53.5],[127.5,52.5],[129.5,51.5],[131.5,50.0],[133.5,48.5],[134.5,47.5],[134.0,46.5],[132.5,45.5],[131.0,45.0],[129.5,44.0],[128.0,44.0],[127.0,45.0],[126.0,46.0],[125.0,46.5],[123.5,46.5],[122.0,47.0],[121.0,48.0],[120.0,49.0],[120.0,50.5],[121.5,51.5],[121.5,53.5]]]
        }
      },
      // 甘肃
      {
        "type": "Feature",
        "properties": { "name": "甘肃", "id": "62" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[93.0,40.0],[96.0,40.5],[98.0,39.5],[100.5,39.5],[102.5,38.5],[104.0,38.0],[105.5,37.5],[106.5,37.0],[106.5,35.5],[105.5,34.5],[104.5,33.5],[103.5,34.5],[102.5,34.5],[102.5,36.5],[100.5,35.5],[98.0,36.0],[96.0,36.5],[93.5,36.5],[92.5,38.0],[93.0,40.0]]]
        }
      },
      // 云南
      {
        "type": "Feature",
        "properties": { "name": "云南", "id": "53" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[98.0,28.5],[99.0,28.0],[100.0,28.0],[101.0,27.0],[102.5,27.5],[104.0,27.5],[105.5,27.5],[106.5,26.5],[106.5,25.0],[105.5,24.0],[104.5,23.0],[103.5,22.5],[102.5,22.0],[101.5,21.5],[100.5,21.5],[99.5,22.0],[98.5,23.0],[98.0,24.0],[97.5,25.0],[97.5,26.5],[98.0,28.5]]]
        }
      },
      // 广西
      {
        "type": "Feature",
        "properties": { "name": "广西", "id": "45" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[104.5,25.5],[106.0,26.0],[107.5,26.5],[109.0,26.0],[110.5,25.5],[111.5,25.0],[112.0,24.0],[111.5,22.5],[110.5,21.5],[108.5,21.5],[106.5,22.0],[105.5,23.0],[104.5,23.0],[104.5,24.0],[104.5,25.5]]]
        }
      },
      // 湖南
      {
        "type": "Feature",
        "properties": { "name": "湖南", "id": "43" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[108.5,30.0],[110.0,30.5],[111.5,30.0],[113.0,29.5],[114.0,29.0],[114.5,28.0],[114.0,26.5],[113.0,25.5],[112.0,25.0],[111.0,25.0],[110.0,26.0],[109.0,26.0],[108.5,27.0],[108.5,28.5],[108.5,30.0]]]
        }
      },
      // 陕西
      {
        "type": "Feature",
        "properties": { "name": "陕西", "id": "61" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[105.5,37.5],[107.0,38.5],[109.0,39.0],[110.5,39.5],[111.0,38.5],[110.5,37.5],[110.5,35.5],[110.0,34.0],[109.5,33.0],[108.5,32.5],[107.5,32.0],[106.5,32.5],[105.5,33.0],[105.5,34.5],[106.5,35.5],[106.5,37.0],[105.5,37.5]]]
        }
      },
      // 广东
      {
        "type": "Feature",
        "properties": { "name": "广东", "id": "44" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[109.5,21.5],[110.5,21.0],[112.0,21.5],[113.5,22.0],[114.5,22.5],[115.5,22.5],[116.5,23.0],[117.5,23.5],[117.0,24.5],[116.0,25.0],[115.0,25.5],[114.0,25.5],[113.0,25.5],[112.0,25.0],[111.5,25.0],[111.0,25.0],[110.5,25.0],[110.0,24.0],[109.5,23.0],[109.5,21.5]]]
        }
      },
      // 吉林
      {
        "type": "Feature",
        "properties": { "name": "吉林", "id": "22" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[121.5,47.0],[123.5,46.5],[125.0,46.5],[126.0,46.0],[127.0,45.0],[128.0,44.0],[129.5,44.0],[130.5,43.0],[130.0,42.5],[128.5,42.0],[127.0,42.0],[125.5,42.5],[124.0,42.5],[123.0,43.0],[122.5,44.0],[122.0,45.0],[121.5,46.0],[121.5,47.0]]]
        }
      },
      // 河北
      {
        "type": "Feature",
        "properties": { "name": "河北", "id": "13" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[113.5,42.5],[115.0,42.5],[116.5,41.5],[117.5,40.5],[118.5,40.0],[119.5,39.5],[118.5,38.5],[117.5,38.0],[116.5,38.0],[116.0,37.5],[115.0,37.0],[114.5,36.5],[114.0,37.5],[113.5,38.5],[113.5,40.0],[114.0,41.0],[113.5,42.5]]]
        }
      },
      // 湖北
      {
        "type": "Feature",
        "properties": { "name": "湖北", "id": "42" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[108.5,31.0],[109.5,31.5],[110.5,31.5],[111.5,31.0],[113.0,31.5],[114.5,31.5],[115.5,31.0],[116.0,30.0],[115.5,29.5],[114.5,29.5],[114.0,29.0],[113.0,29.5],[111.5,30.0],[110.0,30.5],[108.5,30.0],[108.5,31.0]]]
        }
      },
      // 贵州
      {
        "type": "Feature",
        "properties": { "name": "贵州", "id": "52" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[104.0,27.5],[105.5,27.5],[107.0,28.0],[108.5,28.5],[109.5,28.5],[109.5,27.5],[109.0,26.5],[109.0,26.0],[107.5,26.5],[106.0,26.0],[104.5,25.5],[104.0,26.0],[104.0,27.5]]]
        }
      },
      // 山东
      {
        "type": "Feature",
        "properties": { "name": "山东", "id": "37" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[114.5,38.0],[115.5,38.0],[116.5,38.0],[117.5,38.0],[118.5,38.0],[120.0,37.5],[121.5,37.5],[122.5,37.0],[122.0,36.0],[120.5,35.5],[119.0,35.0],[118.0,35.0],[117.0,35.0],[116.0,35.0],[115.0,35.5],[115.0,36.5],[114.5,37.0],[114.5,38.0]]]
        }
      },
      // 江西
      {
        "type": "Feature",
        "properties": { "name": "江西", "id": "36" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[113.5,29.5],[114.5,29.5],[115.5,29.5],[116.5,29.5],[117.0,28.5],[117.5,27.5],[118.0,26.5],[117.5,25.5],[116.5,25.0],[115.5,25.0],[114.5,25.5],[114.0,26.5],[114.0,27.5],[114.0,28.5],[113.5,29.5]]]
        }
      },
      // 河南
      {
        "type": "Feature",
        "properties": { "name": "河南", "id": "41" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[110.5,35.5],[111.5,35.5],[112.5,35.5],[114.0,35.5],[115.5,35.0],[116.0,34.5],[116.0,33.5],[115.5,32.5],[114.5,32.5],[113.5,32.0],[112.5,32.5],[111.5,32.5],[110.5,33.0],[110.0,34.0],[110.5,35.5]]]
        }
      },
      // 辽宁
      {
        "type": "Feature",
        "properties": { "name": "辽宁", "id": "21" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[118.5,40.5],[120.0,40.0],[121.5,40.5],[123.0,40.0],[124.5,40.5],[125.5,41.5],[125.0,42.5],[124.0,42.5],[123.0,42.5],[122.0,41.5],[120.5,40.5],[118.5,40.5]]]
        }
      },
      // 山西
      {
        "type": "Feature",
        "properties": { "name": "山西", "id": "14" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[110.5,39.5],[111.5,40.0],[112.5,40.5],[113.5,40.0],[113.5,38.5],[114.0,37.5],[114.5,36.5],[113.5,35.5],[112.5,35.5],[111.5,35.5],[110.5,35.5],[110.5,37.0],[110.5,39.5]]]
        }
      },
      // 安徽
      {
        "type": "Feature",
        "properties": { "name": "安徽", "id": "34" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[114.5,32.5],[115.5,32.5],[116.5,32.5],[117.5,32.5],[118.5,32.0],[119.0,31.5],[118.5,30.5],[117.5,29.5],[116.5,29.5],[115.5,29.5],[114.5,30.0],[114.5,31.0],[114.5,32.5]]]
        }
      },
      // 福建
      {
        "type": "Feature",
        "properties": { "name": "福建", "id": "35" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[116.5,27.5],[117.5,27.5],[118.5,27.0],[119.5,26.5],[120.0,25.5],[119.5,24.5],[118.5,24.0],[117.5,23.5],[117.0,24.0],[116.5,25.0],[116.5,26.0],[116.5,27.5]]]
        }
      },
      // 浙江
      {
        "type": "Feature",
        "properties": { "name": "浙江", "id": "33" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[118.0,31.0],[119.0,31.5],[120.5,31.0],[121.5,30.5],[122.0,30.0],[122.0,29.0],[121.5,28.0],[120.5,27.5],[119.5,27.5],[118.5,27.5],[118.0,28.5],[117.5,29.5],[118.0,30.5],[118.0,31.0]]]
        }
      },
      // 江苏
      {
        "type": "Feature",
        "properties": { "name": "江苏", "id": "32" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[116.0,35.0],[117.0,35.0],[118.0,34.5],[119.0,34.5],[120.0,34.0],[121.0,33.5],[121.5,32.5],[121.5,31.5],[120.5,31.0],[119.0,31.5],[118.5,32.0],[117.5,32.5],[116.5,32.5],[116.0,33.5],[116.0,34.5],[116.0,35.0]]]
        }
      },
      // 重庆
      {
        "type": "Feature",
        "properties": { "name": "重庆", "id": "50" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[106.5,30.5],[107.5,30.5],[108.5,30.0],[109.5,30.0],[109.5,29.5],[109.5,28.5],[108.5,28.5],[107.5,28.5],[106.5,29.0],[106.5,30.5]]]
        }
      },
      // 宁夏
      {
        "type": "Feature",
        "properties": { "name": "宁夏", "id": "64" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[105.0,39.5],[106.5,39.0],[107.0,38.5],[106.5,37.0],[105.5,37.5],[105.0,37.0],[104.5,37.5],[105.0,38.5],[105.0,39.5]]]
        }
      },
      // 海南
      {
        "type": "Feature",
        "properties": { "name": "海南", "id": "46" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[108.5,19.0],[109.5,18.5],[110.5,18.5],[111.0,19.5],[110.5,20.0],[109.5,20.5],[108.5,20.0],[108.5,19.0]]]
        }
      },
      // 台湾
      {
        "type": "Feature",
        "properties": { "name": "台湾", "id": "71" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[120.0,23.5],[120.5,22.5],[121.0,22.0],[121.5,22.5],[122.0,24.0],[121.5,25.5],[120.5,25.5],[120.0,25.0],[120.0,23.5]]]
        }
      },
      // 北京
      {
        "type": "Feature",
        "properties": { "name": "北京", "id": "11" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[115.5,40.5],[116.0,40.8],[116.8,40.5],[117.2,40.2],[117.0,39.8],[116.5,39.6],[116.0,39.8],[115.5,40.0],[115.5,40.5]]]
        }
      },
      // 天津
      {
        "type": "Feature",
        "properties": { "name": "天津", "id": "12" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[117.0,39.8],[117.5,40.0],[118.0,39.8],[118.2,39.3],[117.8,38.8],[117.2,38.8],[117.0,39.3],[117.0,39.8]]]
        }
      },
      // 上海
      {
        "type": "Feature",
        "properties": { "name": "上海", "id": "31" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[120.8,31.5],[121.5,31.5],[122.0,31.2],[121.8,30.8],[121.2,30.8],[120.8,31.0],[120.8,31.5]]]
        }
      },
      // 香港
      {
        "type": "Feature",
        "properties": { "name": "香港", "id": "81" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[113.8,22.5],[114.4,22.5],[114.4,22.2],[113.8,22.2],[113.8,22.5]]]
        }
      },
      // 澳门
      {
        "type": "Feature",
        "properties": { "name": "澳门", "id": "82" },
        "geometry": {
          "type": "Polygon",
          "coordinates": [[[113.5,22.25],[113.6,22.25],[113.6,22.1],[113.5,22.1],[113.5,22.25]]]
        }
      }
    ]
  };

  // 南海诸岛区域
  const southChinaSea = {
    "type": "Feature",
    "properties": { "name": "南海诸岛", "id": "00" },
    "geometry": {
      "type": "MultiPolygon",
      "coordinates": [
        // 九段线框
        [[[108.0,20.0],[109.5,15.0],[113.0,10.0],[117.0,8.5],[120.0,12.0],[117.5,16.0],[115.0,17.5],[112.0,18.5],[108.0,20.0]]]
      ]
    }
  };

  // 获取边界
  function getBounds() {
    return bounds;
  }

  // 获取GeoJSON数据
  function getGeoData() {
    return geoData;
  }

  // 获取省份颜色
  function getProvinceColor(name) {
    return provinceColors[name] || '#AED581';
  }

  // 获取省份信息
  function getProvinceInfo(name) {
    return provinceInfo[name] || null;
  }

  // 获取南海诸岛数据
  function getSouthChinaSea() {
    return southChinaSea;
  }

  // 经纬度转换为百分比坐标
  function lngLatToPercent(lng, lat) {
    const x = ((lng - bounds.minLng) / (bounds.maxLng - bounds.minLng)) * 100;
    const y = ((bounds.maxLat - lat) / (bounds.maxLat - bounds.minLat)) * 100;
    return { x, y };
  }

  // 经纬度转换为SVG坐标 (viewBox: 0 0 100 100)
  function lngLatToSVG(lng, lat, padding = 5) {
    const { x, y } = lngLatToPercent(lng, lat);
    const scale = (100 - padding * 2) / 100;
    return {
      x: padding + x * scale,
      y: padding + y * scale
    };
  }

  // 将GeoJSON多边形坐标转换为SVG path字符串
  function coordsToPath(coords, padding = 5) {
    const paths = [];
    
    coords.forEach((ring) => {
      const points = ring.map((coord) => {
        const { x, y } = lngLatToSVG(coord[0], coord[1], padding);
        return `${x.toFixed(2)},${y.toFixed(2)}`;
      });
      
      paths.push(`M ${points.join(' L ')} Z`);
    });
    
    return paths.join(' ');
  }

  // 公开API
  return {
    getBounds,
    getGeoData,
    getProvinceColor,
    getProvinceInfo,
    getSouthChinaSea,
    lngLatToPercent,
    lngLatToSVG,
    coordsToPath
  };
})();
